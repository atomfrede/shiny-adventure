<!DOCTYPE html>
<html>
  <head>
    <title>Piwik Javatracker</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    <link rel="apple-touch-icon" sizes="57x57" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-57x57.png?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="apple-touch-icon" sizes="60x60" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-60x60.png?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="apple-touch-icon" sizes="72x72" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-72x72.png?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="apple-touch-icon" sizes="76x76" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-76x76.png?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="apple-touch-icon" sizes="114x114" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-114x114.png?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="apple-touch-icon" sizes="120x120" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-120x120.png?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="apple-touch-icon" sizes="144x144" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-144x144.png?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="apple-touch-icon" sizes="152x152" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-152x152.png?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="apple-touch-icon" sizes="180x180" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-180x180.png?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon-32x32.png?v=wAAv6Wqe6l?v=1490383841585" sizes="32x32">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon-194x194.png?v=wAAv6Wqe6l?v=1490383841585" sizes="194x194">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon-96x96.png?v=wAAv6Wqe6l?v=1490383841585" sizes="96x96">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/android-chrome-192x192.png?v=wAAv6Wqe6l?v=1490383841585" sizes="192x192">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon-16x16.png?v=wAAv6Wqe6l?v=1490383841585" sizes="16x16">
    <link rel="manifest" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/manifest.json?v=wAAv6Wqe6l?v=1490383841585">
    <link rel="shortcut icon" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon.ico?v=wAAv6Wqe6l?v=1490383841585">
    <meta name="msapplication-TileColor" content="#e74c3c">
    <meta name="msapplication-TileImage" content="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/mstile-144x144.png?v=wAAv6Wqe6l?v=1490383841585">
    <meta name="msapplication-config" content="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/browserconfig.xml?v=wAAv6Wqe6l?v=1490383841585">
    <meta name="theme-color" content="#e74c3c">
    <link rel="stylesheet" type="text/css" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/css/uno-zen.css?v=1490383841585" />
    <link rel="canonical" href="https://atomfrede.github.io/shiny-adventure/2014/01/19/Piwik-Javatracker.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="Shiny Adventures" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Piwik Javatracker" />
    <meta property="og:description" content="Jeder kennt google analytics und vielleicht auch die freie alternative Piwik. Die Einbindung passiert normalerweiße über ein kleines JavaScript Snippet, sodass bei jedem Seitenaufruf die Piwik-Instanz informiert wird. Bereits vor längerer Zeit stellte sich das Problem, wie man eine Wicket Webanwendung an Piwik anbindet. Mein erster Gedanke, einfac" />
    <meta property="og:url" content="https://atomfrede.github.io/shiny-adventure/2014/01/19/Piwik-Javatracker.html" />
    <meta property="article:published_time" content="2014-01-19T00:00:00.000Z" />
    <meta property="article:tag" content="Piwik" />
    <meta property="article:tag" content=" Java" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Piwik Javatracker" />
    <meta name="twitter:description" content="Jeder kennt google analytics und vielleicht auch die freie alternative Piwik. Die Einbindung passiert normalerweiße über ein kleines JavaScript Snippet, sodass bei jedem Seitenaufruf die Piwik-Instanz informiert wird. Bereits vor längerer Zeit stellte sich das Problem, wie man eine Wicket Webanwendung an Piwik anbindet. Mein erster Gedanke, einfac" />
    <meta name="twitter:url" content="https://atomfrede.github.io/shiny-adventure/2014/01/19/Piwik-Javatracker.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Shiny Adventures",
    "author": {
        "@type": "Person",
        "name": "Frederik Hahne",
        "image": "https://avatars1.githubusercontent.com/u/203401?v=3",
        "url": "https://atomfrede.github.io/shiny-adventure/author/atomfrede/",
        "sameAs": "http://atomfrede.github.com/shiny-adventure/"
    },
    "headline": "Piwik Javatracker",
    "url": "https://atomfrede.github.io/shiny-adventure/2014/01/19/Piwik-Javatracker.html",
    "datePublished": "2014-01-19T00:00:00.000Z",
    "keywords": "Piwik,  Java",
    "description": "Jeder kennt google analytics und vielleicht auch die freie alternative Piwik. Die Einbindung passiert normalerweiße über ein kleines JavaScript Snippet, sodass bei jedem Seitenaufruf die Piwik-Instanz informiert wird. Bereits vor längerer Zeit stellte sich das Problem, wie man eine Wicket Webanwendung an Piwik anbindet. Mein erster Gedanke, einfac"
}
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="Shiny Adventures" href="https://atomfrede.github.io/shiny-adventure/rss/" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/atom-one-dark.min.css">
  </head>
  <body class="post-template tag-Piwik tag-Java">
    <header id="menu-button" class="expanded">
      <a><i class="icon icon-list"></i></a>
    </header>
    <aside class="cover" style="background: url() center/cover no-repeat fixed">
      <div class="cover container">
        <div class="profile">
          <a id="avatar-link" title="link to homepage for Shiny Adventures" href="https://atomfrede.github.io/shiny-adventure/#open">
            <img src="https://avatars2.githubusercontent.com/u/203401?v&#x3D;3&amp;s&#x3D;460" alt="Shiny Adventures avatar" class="profile avatar rounded hvr-buzz-out" />
            <h1 id="profile-title">Shiny Adventures</h1>
            <h3 id="profile-resume"></h3>
          </a>
    
          <hr class="divider long" />
          <p>Of a former computer science student, now nerd and jhipster </p>
          <hr class="divider short" />
          <div class="navigation">
            <div class="profile contact">
              
              <nav class="navigation right">
                <ul class="social expanded">
              
                  <!-- Twitter -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://www.facebook.com/frederik.hahne" title="Facebook account">
                      <i class='icon icon-social-facebook'></i>
                      <span class="label">Facebook</span>
                    </a>
                  </li>
              
                  <!-- Twitter -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://twitter.com/atomfrede" title="Twitter account">
                      <i class='icon icon-social-twitter'></i>
                      <span class="label">Twitter</span>
                    </a>
                  </li>
              
                  <!-- Google Plus -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://plus.google.com/+FrederikHahne" title="Google+ account">
                      <i class='icon icon-social-google-plus'></i>
                      <span class="label">Google-plus</span>
                    </a>
                  </li>
              
                  <!-- Github -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://github.com/atomfrede" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="http://de.linkedin.com/in/frederikhahne" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
              
                </ul>
              </nav>
              <!-- <section class="icon icon-search" id="search-container">
      <hr class="divider short" />
      <form id="search-form">
        <input type="text", name="search", placeholder="git, css, javascript,..." id="search-field" />
      </form>
    </section>
     -->
            </div>
          </div>
        </div>
      </div>
    </aside>
    <main>
      <section id="search-results"></section>
      <section class="content">
        

  <article class="post tag-Piwik tag-Java">
    <header>
      <div class="post meta">
        <time datetime="19 Jan 2014">19 Jan 2014</time>
        <span class="post tags">in <a href="https://atomfrede.github.io/shiny-adventure/tag/Piwik/">Piwik</a> <a href="https://atomfrede.github.io/shiny-adventure/tag/Java/"> Java</a></span>


        <span class="post reading-time"> ~ <span></span> read.</span>
      </div>
      <a alt="Tweet 'Piwik Javatracker'" href="https://twitter.com/intent/tweet?text=Piwik%20Javatracker%20%C2%BB&amp;hashtags=Piwik, Java&amp;url=https://atomfrede.github.io/shiny-adventure/">
        
        <h1 class="icon-reverse icon-social-twitter-post" id="post-title">Piwik Javatracker</h1>
      </a>
    </header>

    <div id="post-content" class="post tag-Piwik tag-Java">
      <div class="paragraph">
<p>Jeder kennt google analytics und vielleicht auch die freie alternative <a href="http://www.piwik.org/">Piwik</a>. Die Einbindung passiert normalerweiße über ein kleines JavaScript Snippet, sodass bei jedem Seitenaufruf die Piwik-Instanz informiert wird. Bereits vor längerer Zeit stellte sich das Problem, wie man eine <a href="http://wwww.wicket.apache.org/">Wicket Webanwendung</a> an Piwik anbindet.</p>
</div>
<div class="paragraph">
<p>Mein erster Gedanke, einfach das JS Snippet als Resource in jede Seite einzubinden hat leider nicht geklappt, Piwik wurde nicht über Seitenbesuche informiert. Doch zum Glück gibt es eine <a href="https://github.com/piwik/piwik-java-tracking">Java-Implementierung der Tracking Api</a>. Das ganze habe ich dann folgendermaßen eingebunden:</p>
</div>
<div class="paragraph">
<p>Jede <code>Page</code> implementiert das Interface <code>PiwikTrackable</code>:</p>
</div>
<div class="listingblock">
<div class="title">PiwikTrackable.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public interface PiwikTrackable {
  void trackPageVisit();
  void trackPageVisit(String title);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In der <code>BasePage</code> kann man nun ganz einfach zumindest einen Besuch der entsprechenden Seite tracken, indem man einfach die implementierte Methode <code>trackPageVisit(String title)</code> aufruft:</p>
</div>
<div class="listingblock">
<div class="title">BasePage.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
  public void trackPageVisit(String title) {
      HttpServletRequest servletReq = (HttpServletRequest) getRequest().getContainerRequest();
          SimplePiwikTracker spwt = new SimplePiwikTracker(1, "url-zu-deiner-piwik-installation", servletReq);
          spwt.sendRequest(spwt.getPageTrackURL(title));
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Diese Methode hat einen Nachteil, es wird tatsächlich nur der Besuch protokolliert. Wenn mehr Informationen (z.B. verwendeter Browser) benötigt werden, dann müssen diese Informationen zuerst ausgelesen werden. Mit Wicket geht es am einfachsten, wenn man sich an die Dokumentation zu <a href="http://ci.apache.org/projects/wicket/apidocs/6.x/">ClientProperties</a> hält und dann diese Informationen in den <code>PiwikRequest</code> schreibt.</p>
</div>
    </div>

    <div class="post related">

    </div>

    <footer class="post comments">
    </footer>

  </article>


        <footer>
          <span class="copyright">
            &copy; 2017. All rights reserved. Built with <a href="https://github.com/Kikobeats/uno-zen" target="_blank">Uno Zen</a> under <a href="http://hubpress.io/" target="_blank">HubPress</a>.
          </span>
        </footer>
      </section>
    </main>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>
       
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
    <script src="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/js/uno-zen.js?v=1490383841585" type="text/javascript" charset="utf-8"></script>
  </body>
</html>
