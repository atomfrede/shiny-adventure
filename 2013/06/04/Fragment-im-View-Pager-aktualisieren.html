<!DOCTYPE html>
<html>
  <head>
    <title>Fragment im ViewPager aktualisieren</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    <link rel="apple-touch-icon" sizes="57x57" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-57x57.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="60x60" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-60x60.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="72x72" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-72x72.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="76x76" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-76x76.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="114x114" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-114x114.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="120x120" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-120x120.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="144x144" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-144x144.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="152x152" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-152x152.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="180x180" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/apple-touch-icon-180x180.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon-32x32.png?v=wAAv6Wqe6l?v=1.0.0" sizes="32x32">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon-194x194.png?v=wAAv6Wqe6l?v=1.0.0" sizes="194x194">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon-96x96.png?v=wAAv6Wqe6l?v=1.0.0" sizes="96x96">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/android-chrome-192x192.png?v=wAAv6Wqe6l?v=1.0.0" sizes="192x192">
    <link rel="icon" type="image/png" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon-16x16.png?v=wAAv6Wqe6l?v=1.0.0" sizes="16x16">
    <link rel="manifest" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/manifest.json?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="shortcut icon" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/favicon.ico?v=wAAv6Wqe6l?v=1.0.0">
    <meta name="msapplication-TileColor" content="#e74c3c">
    <meta name="msapplication-TileImage" content="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/mstile-144x144.png?v=wAAv6Wqe6l?v=1.0.0">
    <meta name="msapplication-config" content="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/img/browserconfig.xml?v=wAAv6Wqe6l?v=1.0.0">
    <meta name="theme-color" content="#e74c3c">
    <link rel="stylesheet" type="text/css" href="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/css/uno-zen.css?v=1.0.0" />
    <link rel="canonical" href="https://atomfrede.github.io/shiny-adventure/2013/06/04/Fragment-im-View-Pager-aktualisieren.html" />
    
    <meta property="og:site_name" content="Shiny Adventures" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Fragment im ViewPager aktualisieren" />
    <meta property="og:description" content="In meiner Sprintercup App für Android benutze ich einen ViewPager um zwischen den einzelnen Läufen zu wechseln. Der Benutzer sollte in Lage sein einen Lauf als abgeschlossen zu markieren, wodurch sich die Darstellung des enthaltenen ListViews ändert. Hierzu muss man..." />
    <meta property="og:url" content="https://atomfrede.github.io/shiny-adventure/2013/06/04/Fragment-im-View-Pager-aktualisieren.html" />
    <meta property="article:published_time" content="2013-06-03T22:00:00.000Z" />
    <meta property="article:modified_time" content="2016-02-10T18:15:53.785Z" />
    <meta property="article:tag" content="Android" />
    <meta property="article:tag" content="ViewPager" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Fragment im ViewPager aktualisieren" />
    <meta name="twitter:description" content="In meiner Sprintercup App für Android benutze ich einen ViewPager um zwischen den einzelnen Läufen zu wechseln. Der Benutzer sollte in Lage sein einen Lauf als abgeschlossen zu markieren, wodurch sich die Darstellung des enthaltenen ListViews ändert. Hierzu muss man..." />
    <meta name="twitter:url" content="https://atomfrede.github.io/shiny-adventure/2013/06/04/Fragment-im-View-Pager-aktualisieren.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Shiny Adventures",
    "author": {
        "@type": "Person",
        "name": "Frederik Hahne",
        "image": "https://avatars.githubusercontent.com/u/203401?v=3",
        "url": "undefined/author/undefined",
        "sameAs": "http://atomfrede.github.com/shiny-adventure/"
    },
    "headline": "Fragment im ViewPager aktualisieren",
    "url": "https://atomfrede.github.io/shiny-adventure/2013/06/04/Fragment-im-View-Pager-aktualisieren.html",
    "datePublished": "2013-06-03T22:00:00.000Z",
    "dateModified": "2016-02-10T18:15:53.785Z",
    "keywords": "Android,  ViewPager",
    "description": "In meiner Sprintercup App für Android benutze ich einen ViewPager um zwischen den einzelnen Läufen zu wechseln. Der Benutzer sollte in Lage sein einen Lauf als abgeschlossen zu markieren, wodurch sich die Darstellung des enthaltenen ListViews ändert. Hierzu muss man..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="Shiny Adventures" href="https://atomfrede.github.io/shiny-adventure/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
  </head>
  <body class="post-template tag-Android tag-View-Pager">
    <header id="menu-button" class="expanded">
      <a><i class="icon icon-list"></i></a>
    </header>
    <aside class="cover" style="background: url() center/cover no-repeat fixed">
      <div class="cover container">
        <div class="profile">
          <a id="avatar-link" title="link to homepage for Shiny Adventures" href="https://atomfrede.github.io/shiny-adventure/#open">
            <img src="https://avatars2.githubusercontent.com/u/203401?v=3&amp;s=460" alt="Shiny Adventures avatar" class="profile avatar rounded hvr-buzz-out" />
            <h1 id="profile-title">Shiny Adventures</h1>
            <h3 id="profile-resume"></h3>
          </a>
    
          <hr class="divider long" />
          <p>Of a former student of Computer Science</p>
          <hr class="divider short" />
          <div class="navigation">
            <div class="profile contact">
              
              <nav class="navigation right">
                <ul class="social expanded">
              
                  <!-- Twitter -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://www.facebook.com/frederik.hahne" title="Facebook account">
                      <i class='icon icon-social-facebook'></i>
                      <span class="label">Facebook</span>
                    </a>
                  </li>
              
                  <!-- Twitter -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://twitter.com/atomfrede" title="Twitter account">
                      <i class='icon icon-social-twitter'></i>
                      <span class="label">Twitter</span>
                    </a>
                  </li>
              
                  <!-- Google Plus -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://plus.google.com/+FrederikHahne" title="Google+ account">
                      <i class='icon icon-social-google-plus'></i>
                      <span class="label">Google-plus</span>
                    </a>
                  </li>
              
                  <!-- Github -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://github.com/atomfrede" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="http://de.linkedin.com/in/frederikhahne" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
              
                </ul>
              </nav>
              <!-- <section class="icon icon-search" id="search-container">
      <hr class="divider short" />
      <form id="search-form">
        <input type="text", name="search", placeholder="git, css, javascript,..." id="search-field" />
      </form>
    </section>
     -->
            </div>
          </div>
        </div>
      </div>
    </aside>
    <main>
      <section id="search-results"></section>
      <section class="content">
        

  <article class="post tag-Android tag-View-Pager">
    <header>
      <div class="post meta">
        <time datetime="04 Jun 2013">04 Jun 2013</time>
        <span class="post tags">in <a href="https://atomfrede.github.io/shiny-adventure/tag/Android">Android</a> <a href="https://atomfrede.github.io/shiny-adventure/tag/View-Pager"> ViewPager</a></span>


        <span class="post reading-time"> ~ <span></span> read.</span>
      </div>
      <a alt="Tweet 'Fragment im ViewPager aktualisieren'" href="https://twitter.com/intent/tweet?text=Fragment%20im%20ViewPager%20aktualisieren%20%C2%BB&amp;hashtags=Android, ViewPager&amp;url=https://atomfrede.github.io/shiny-adventure/2013/06/04/Fragment-im-ViewPager-aktualisieren.html">
        
        <h1 class="icon-reverse icon-social-twitter-post" id="post-title">Fragment im ViewPager aktualisieren</h1>
      </a>
    </header>

    <div id="post-content" class="post tag-Android tag-View-Pager">
      <div class="paragraph">
<p>In meiner <a href="http://atomfrede.github.io/scc/">Sprintercup App für Android</a> benutze ich einen <a href="http://developer.android.com/reference/android/support/v4/view/ViewPager.html">ViewPager</a> um zwischen den einzelnen Läufen zu wechseln. Der Benutzer sollte in Lage sein einen Lauf als abgeschlossen zu markieren, wodurch sich die Darstellung des enthaltenen <a href="http://developer.android.com/guide/topics/ui/layout/listview.html">ListView</a>s ändert. Hierzu muss man dem ListView natürlich mitteilen, dass sich der Inhalt geändert hat und er sich doch bitte neu zeichen sollte.</p>
</div>
<div class="paragraph">
<p>Da der ViewPpager die enthaltenen Fragments nicht alle im Speicher hält musste eine bessere Lösung her. Die erste Idee funktionierte auch schon ganz gut. Hierzu habe ich einen einen kleinen <a href="http://developer.android.com/reference/android/util/LruCache.html">LruCache</a> innerhalb des <a href="http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html">FragmentStatePagerAdapter</a>s zu verwenden.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public Fragment getItem(int position) {
       LapEntryFragment currentFragment = LapEntryFragment.newInstance(mLaps.get(position).getId());
       //erzeugtes Fragment im LruCache speichern
       position_fragment.put(position, currentFragment);
       return currentFragment;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Das ganze geht allerdings nur so lange gut, bis man z.B. das Handy dreht, da dann der ViewPager neu initialisiert wird und daruch auch der Cache geleert wird. Der verwendete FragmentStatePagerAdapter bietet allerdngs eine passende Methode an, sodass man an auf entsprechende Fragment an Position i zugreifen kann. Hierbei wird entweder ein bereits vorhandes Fragment zurückgegeben oder es wird eines erzeugt:</p>
</div>
<div class="paragraph">
<p><code>PagerAdapter.instantiateItem(mPager, lastSelectedPagerPositon);</code></p>
</div>
<div class="paragraph">
<p>Das ganze sieht dann so aus (verkürzt):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void markAsDone() {
        //Datenbank Objekte aktualisieren
        mLaps.get(lastSelectedPagerPositon).setIsDone(true);
        Lap lap = mLapDao.load(selectedLapId);
        lap.setIsDone(true);
        mLapDao.update(lap);
        //Fragment laden
        LapEntryFragment_ lapEntryFragment = (LapEntryFragment_)mPagerAdapter.instantiateItem(mPager, lastSelectedPagerPositon);
        //Darstellung aktualisieren
        lapEntryFragment.mEntryAdapter.notifyDataSetChanged();
}</code></pre>
</div>
</div>
    </div>

    <div class="post related">

    </div>

    <footer class="post comments">
    </footer>

  </article>


        <footer>
          <span class="copyright">
            &copy; 2016. All rights reserved. Built with <a href="https://github.com/Kikobeats/uno-zen" target="_blank">Uno Zen</a> under <a href="http://hubpress.io/" target="_blank">HubPress</a>.
          </span>
        </footer>
      </section>
    </main>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>
    <script src="//atomfrede.github.io/shiny-adventure/themes/uno-zen/assets/js/uno-zen.js?v=1.0.0" type="text/javascript" charset="utf-8"></script>
  </body>
</html>
